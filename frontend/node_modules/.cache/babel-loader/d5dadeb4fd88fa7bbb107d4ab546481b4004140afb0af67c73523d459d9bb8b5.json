{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport Bar from '@/components/Bar/toolbar-menu/ToolBar.vue';\nimport Draw from '@/components/draw/DrawCanvas.vue';\nimport { mapActions } from 'vuex';\nexport default {\n  setup() {\n    return {};\n  },\n  components: {\n    Bar,\n    Draw\n  },\n  methods: {\n    ...mapActions('content', ['insertContentData']),\n    async handleInsertContentData() {\n      console.log(\"dashBoard.vue -> methods -> handleInsertContentData 36\");\n      const data = this.$refs.toolbar.textSave();\n      const canvas = this.$refs.draw.saveImage();\n      console.log(canvas);\n      const w = await canvas.createWritable();\n      await w.write(canvas.toDataURL('image/png'));\n      await w.close();\n      await w.write(_base64ToArrayBuffer(canvas.toDataURL('image/png').substring(22)));\n      // let image = canvas.toDataURL(\"image/png\", 1).substring(22); \n\n      function _base64ToArrayBuffer(base64) {\n        var binary_string = window.atob(base64);\n        var len = binary_string.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n          bytes[i] = binary_string.charCodeAt(i);\n        }\n        return bytes.buffer;\n      }\n\n      ///////////////\n\n      const dataAll = {\n        \"text\": data.text,\n        \"title\": data.title,\n        \"folderId\": data.folderId,\n        \"image\": image\n      };\n      console.log(\"dataAll: \" + dataAll);\n      console.log(\"TEXT -> \" + dataAll.text);\n      console.log(\"title -> \" + dataAll.title);\n      console.log(\"folder id -> \" + dataAll.folderId);\n      console.log(\"image \" + dataAll.image);\n      await this.insertContentData(data, image);\n    }\n  }\n};","map":{"version":3,"names":["Bar","Draw","mapActions","setup","components","methods","handleInsertContentData","console","log","data","$refs","toolbar","textSave","canvas","draw","saveImage","w","createWritable","write","toDataURL","close","_base64ToArrayBuffer","substring","base64","binary_string","window","atob","len","length","bytes","Uint8Array","i","charCodeAt","buffer","dataAll","text","title","folderId","image","insertContentData"],"sources":["/home/nexoc/JS/frontend/frontend-vue/src/views/DashBoard.vue"],"sourcesContent":["<template>\n  \n  <table>\n  <tr>\n    <th>  <Bar ref=\"toolbar\" />   </th>\n    <th>  <Draw ref=\"draw\"/>  </th>\n  </tr>\n\n    <div id=\"save\" property=\"margin:50px\">\n        <form @submit.prevent=\"handleInsertContentData\">\n\n          <button id='saveButton'>Save</button>          \n\n        </form>\n      </div>\n\n</table>   \n  \n</template>\n    \n<script>\nimport Bar from '@/components/Bar/toolbar-menu/ToolBar.vue'\nimport Draw from '@/components/draw/DrawCanvas.vue'\nimport { mapActions } from 'vuex';\n\n    export default {\n      setup() {\n        return {  }\n      },\n      components: { Bar, Draw },\n\n      methods: {\n          ...mapActions('content', ['insertContentData']),\n          \n          async handleInsertContentData() {\n              console.log(\"dashBoard.vue -> methods -> handleInsertContentData 36\")\n              const data = this.$refs.toolbar.textSave();\n              const canvas = this.$refs.draw.saveImage(); \n              console.log(canvas)\n\n\n\n              const w = await canvas.createWritable();\n              await w.write( canvas.toDataURL('image/png') );\n              await w.close();\n\n              await w.write( _base64ToArrayBuffer(canvas.toDataURL('image/png').substring(22)));\n              // let image = canvas.toDataURL(\"image/png\", 1).substring(22); \n\n\n         function _base64ToArrayBuffer(base64) {\n              var binary_string = window.atob(base64);\n              var len = binary_string.length;\n              var bytes = new Uint8Array(len);\n              for (var i = 0; i < len; i++) {\n                  bytes[i] = binary_string.charCodeAt(i);\n              }\n              return bytes.buffer;\n}     \n\n///////////////\n\n\n\n              \n              const dataAll = {\n                \"text\": data.text,\n                \"title\": data.title,\n                \"folderId\": data.folderId,\n                \"image\": image\n              }\n              console.log(\"dataAll: \" + dataAll)  \n              console.log(\"TEXT -> \" + dataAll.text)\n              console.log(\"title -> \" + dataAll.title)\n              console.log(\"folder id -> \" + dataAll.folderId)\n              console.log(\"image \" + dataAll.image)   \n\n\n              await this.insertContentData(data, image);\n          },\n      },\n}\n</script>\n\n<style>\n\n</style>\n\n"],"mappings":";;;;;;;AAqBA,OAAOA,GAAE,MAAO,2CAA0C;AAC1D,OAAOC,IAAG,MAAO,kCAAiC;AAClD,SAASC,UAAS,QAAS,MAAM;AAE7B,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,OAAO,CAAG;EACZ,CAAC;EACDC,UAAU,EAAE;IAAEJ,GAAG;IAAEC;EAAK,CAAC;EAEzBI,OAAO,EAAE;IACL,GAAGH,UAAU,CAAC,SAAS,EAAE,CAAC,mBAAmB,CAAC,CAAC;IAE/C,MAAMI,uBAAuBA,CAAA,EAAG;MAC5BC,OAAO,CAACC,GAAG,CAAC,wDAAwD;MACpE,MAAMC,IAAG,GAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,QAAQ,CAAC,CAAC;MAC1C,MAAMC,MAAK,GAAI,IAAI,CAACH,KAAK,CAACI,IAAI,CAACC,SAAS,CAAC,CAAC;MAC1CR,OAAO,CAACC,GAAG,CAACK,MAAM;MAIlB,MAAMG,CAAA,GAAI,MAAMH,MAAM,CAACI,cAAc,CAAC,CAAC;MACvC,MAAMD,CAAC,CAACE,KAAK,CAAEL,MAAM,CAACM,SAAS,CAAC,WAAW,CAAE,CAAC;MAC9C,MAAMH,CAAC,CAACI,KAAK,CAAC,CAAC;MAEf,MAAMJ,CAAC,CAACE,KAAK,CAAEG,oBAAoB,CAACR,MAAM,CAACM,SAAS,CAAC,WAAW,CAAC,CAACG,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;MACjF;;MAGL,SAASD,oBAAoBA,CAACE,MAAM,EAAE;QACjC,IAAIC,aAAY,GAAIC,MAAM,CAACC,IAAI,CAACH,MAAM,CAAC;QACvC,IAAII,GAAE,GAAIH,aAAa,CAACI,MAAM;QAC9B,IAAIC,KAAI,GAAI,IAAIC,UAAU,CAACH,GAAG,CAAC;QAC/B,KAAK,IAAII,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIJ,GAAG,EAAEI,CAAC,EAAE,EAAE;UAC1BF,KAAK,CAACE,CAAC,IAAIP,aAAa,CAACQ,UAAU,CAACD,CAAC,CAAC;QAC1C;QACA,OAAOF,KAAK,CAACI,MAAM;MACjC;;MAEA;;MAKc,MAAMC,OAAM,GAAI;QACd,MAAM,EAAEzB,IAAI,CAAC0B,IAAI;QACjB,OAAO,EAAE1B,IAAI,CAAC2B,KAAK;QACnB,UAAU,EAAE3B,IAAI,CAAC4B,QAAQ;QACzB,OAAO,EAAEC;MACX;MACA/B,OAAO,CAACC,GAAG,CAAC,WAAU,GAAI0B,OAAO;MACjC3B,OAAO,CAACC,GAAG,CAAC,UAAS,GAAI0B,OAAO,CAACC,IAAI;MACrC5B,OAAO,CAACC,GAAG,CAAC,WAAU,GAAI0B,OAAO,CAACE,KAAK;MACvC7B,OAAO,CAACC,GAAG,CAAC,eAAc,GAAI0B,OAAO,CAACG,QAAQ;MAC9C9B,OAAO,CAACC,GAAG,CAAC,QAAO,GAAI0B,OAAO,CAACI,KAAK;MAGpC,MAAM,IAAI,CAACC,iBAAiB,CAAC9B,IAAI,EAAE6B,KAAK,CAAC;IAC7C;EACJ;AACN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}